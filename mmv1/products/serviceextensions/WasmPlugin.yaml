# Copyright 2023 Google Inc.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

--- !ruby/object:Api::Resource
name: 'WasmPlugin'
base_url: 'projects/{{project}}/locations/global/wasmPlugins'
create_url: 'projects/{{project}}/locations/global/wasmPlugins?wasmPluginId={{name}}'
self_link: 'projects/{{project}}/locations/global/wasmPlugins/{{name}}'
update_verb: :PATCH
update_mask: true
description: |
  WasmPlugin description TBD.
async: !ruby/object:Api::OpAsync
  operation: !ruby/object:Api::OpAsync::Operation
    path: 'name'
    base_url: '{{op_id}}'
    wait_ms: 1000
    timeouts: !ruby/object:Api::Timeouts
      insert_minutes: 60
      update_minutes: 60
      delete_minutes: 60
  result: !ruby/object:Api::OpAsync::Result
    path: 'response'
  status: !ruby/object:Api::OpAsync::Status
    path: 'done'
    complete: true
    allowed:
      - true
      - false
  error: !ruby/object:Api::OpAsync::Error
    path: 'error'
    message: 'message'
autogen_async: true
import_format:
  ['projects/{{project}}/locations/global/wasmPlugins/{{name}}']
#virtual_fields:
custom_code: !ruby/object:Provider::Terraform::CustomCode
  constants: templates/terraform/constants/serviceextensions_versions.go.erb
  pre_update: templates/terraform/pre_update/serviceextensions_versions.go.erb
  post_update: templates/terraform/post_update/serviceextensions_versions.go.erb
#  custom_update: templates/terraform/custom_update/serviceextensions_versions_update.go.erb
#  custom_import: templates/terraform/custom_import/wasmplugin_import.go.erb
#  decoder: templates/terraform/decoders/wasmplugin_decoder.go.erb
examples:
  - !ruby/object:Provider::Terraform::Examples
    name: 'service_extensions_wasm_plugin_basic'
    primary_resource_id: 'default'
    vars:
      resource_name: 'my-wasm-plugin'
    ignore_read_extra:
      - 'timeout'
parameters:
  - !ruby/object:Api::Type::String
    name: 'name'
    required: true
    immutable: true
    url_param_only: true
    description: |
      Name of the resource; provided by the client when the resource is created.
      The name must be 1-64 characters long, and match the regular expression [a-zA-Z][a-zA-Z0-9_-]* which means the first character must be a letter,
      and all following characters must be a dash, underscore, letter or digit.
properties:
  - !ruby/object:Api::Type::String
    name: 'description'
    description: |
      A human-readable description of the resource.
  - !ruby/object:Api::Type::KeyValuePairs
    name: 'labels'
    description: 'Set of label tags associated with the WasmPlugin resource.'
  - !ruby/object:Api::Type::String
    name: 'mainVersionId'
    description: |
      The ID of the WasmPluginVersion that is the currently serving one.
      The version referred to must be a child of this WasmPlugin.
  - !ruby/object:Api::Type::Map
    name: 'versions2'
    description: |
      TBD.
    key_name: 'name'
    key_description: |
      TBD
    value_type: !ruby/object:Api::Type::NestedObject
      name: 'ver-nested'
      properties:
        - !ruby/object:Api::Type::String
          name: imageUri
          required: true
          description: |
            Image URI.
        - !ruby/object:Api::Type::String
          name: description       
          description: The description of the game server config.
        - !ruby/object:Api::Type::KeyValuePairs
          name: labels
          description: |-
            The labels associated with this game server config. Each label is a
            key-value pair.
